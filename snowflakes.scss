.snowflakes-container {
  padding: 0;
  width: 0;
  height: 0;
}

@function toFixed($number, $decimalPlaces) {
  $multiplier: pow(10, $decimalPlaces);
  @return calc(round($number * $multiplier) / $multiplier)
}

@mixin create-snowflake($index, $opacity, $translate, $scale, $animation-delay, $animationDuration, $randomNum, $snowflakeXTrajectoryDeviation) {
  $startAnimPercentage: $randomNum + '%';
  $startAnimHeight: $randomNum + vh;
  $endAnimVW: $translate + $snowflakeXTrajectoryDeviation;


  .snowflake:nth-child(#{$index}) {
    opacity: $opacity;
    transform: translate(#{$translate}, -10px) scale($scale);
    animation: fall-#{$index} #{$animationDuration} -#{$animation-delay} linear infinite;
  }

  @keyframes fall-#{$index} {
    #{$startAnimPercentage} {
      transform: translate(nth($translate, 1), $startAnimHeight) scale($scale) rotate(180deg);
    }
    to {
      transform: translate($endAnimVW, 100vh) scale($scale) rotate(360deg);
    }
  }
}

@for $i from 1 through 94 {
  $opacity: toFixed(random(), 5);
  $translate: if($i % 2 == 0, calc(random(101) - 1) * 1vw, calc(random(101) - 1) * 1vw);
  $scale: if($i % 2 == 0, calc(random(10) / 10), calc(random(2) / 2));
  $animation-delay: random(100) + s;
  $animationDuration: random(100 - 30) + 30 + s;
  $randomPercentage: toFixed(random(), 5) * 60;
  $snowflakeXTrajectoryDeviationAbs: toFixed(random(), 5) * 10;
  $snowflakeXTrajectoryDeviation: if(random(100) % 2 == 0, $snowflakeXTrajectoryDeviationAbs, -$snowflakeXTrajectoryDeviationAbs);

  @include create-snowflake($i, $opacity, $translate, $scale, $animation-delay, $animationDuration, $randomPercentage, $snowflakeXTrajectoryDeviation);
}



